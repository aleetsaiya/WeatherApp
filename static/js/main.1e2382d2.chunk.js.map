{"version":3,"sources":["image/refresh.jpg","image/sunny.gif","component/WeatherApp.jsx","App.js","index.js"],"names":["WeatherApp","authorization","useState","locationName","temp","humd","chanceOfRain","description","currentWeather","setCurrentWeather","useEffect","fetchCurrentWeather","fetchWeatherPrediction","console","log","url","axios","get","then","respose","target","data","records","location","find","parseFloat","weatherElement","e","elementName","elementValue","prevState","catch","err","response","obj","time","parameter","parameterName","className","src","sunny","alt","onClick","refresh","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"yQAAe,G,MAAA,IAA0B,qCCA1B,MAA0B,kC,OCyF1BA,EAlFI,WACf,IAAMC,EAAgB,2CACtB,EAA4CC,mBAAS,CACjDC,aAAc,GACdC,KAAM,GACNC,KAAM,GACNC,aAAc,GACdC,YAAa,KALjB,mBAAOC,EAAP,KAAuBC,EAAvB,KAQAC,qBAAU,WACNC,IACAC,MACD,IAEH,IAAMD,EAAsB,WACxBE,QAAQC,IAAI,yBACZ,IAAMC,EAAG,sFAAkFd,GAC3Fe,IAAMC,IAAIF,GACLG,MAAK,SAAAC,GACF,IACMC,EAASD,EAAQE,KAAKC,QAAQC,SAASC,MAAK,SAAAH,GAAI,MADjC,iBACqCA,EAAKlB,gBACzDC,EAAOqB,WAAWL,EAAOM,eAAeF,MAAK,SAAAG,GAAC,MAAsB,SAAlBA,EAAEC,eAAwBC,cAC5ExB,EAA0F,IAAnFoB,WAAWL,EAAOM,eAAeF,MAAK,SAAAG,GAAC,MAAsB,SAAlBA,EAAEC,eAAwBC,cAClFpB,GAAkB,SAAAqB,GACd,OAAO,2BACAA,GADP,IAEI3B,aAPa,eAQbC,OACAC,eAIX0B,OAAM,SAAAC,GACHnB,QAAQC,IAAI,SAAUkB,OAI5BpB,EAAyB,WAC3BC,QAAQC,IAAI,4BACZ,IAAMC,EAAG,sFAAkFd,GAC3Fe,IAAMC,IAAIF,GACLG,MAAK,SAAAe,GACF,IACMZ,EAAOY,EAASZ,KAAKC,QAAQC,SAASC,MAAK,SAAAU,GAAG,MAD/B,uBACmCA,EAAI/B,gBACtDI,EAAcc,EAAKK,eAAeF,MAAK,SAAAG,GAAC,MAAsB,OAAlBA,EAAEC,eAAsBO,KAAK,GAAGC,UAAUC,cACtF/B,EAAee,EAAKK,eAAeF,MAAK,SAAAG,GAAC,MAAsB,QAAlBA,EAAEC,eAAuBO,KAAK,GAAGC,UAAUC,cAC9F5B,GAAkB,SAAAqB,GACd,OAAO,2BACAA,GADP,IAEIvB,cACAD,uBAIXyB,OAAM,SAAAC,GACHnB,QAAQC,IAAIkB,OAIxB,OACI,sBAAKM,UAAU,OAAf,UACI,6BAAK9B,EAAeL,eACpB,8BAAMK,EAAeD,cACrB,sBAAK+B,UAAU,OAAf,UACI,sBAAKA,UAAU,OAAf,UAAuB9B,EAAeJ,KAAK,4CAC3C,qBAAKmC,IAAKC,EAAOC,IAAI,QAAQH,UAAU,aAE3C,sBAAKA,UAAU,iBAAf,UACI,6DAAY9B,EAAeH,KAA3B,OACA,6DAAYG,EAAeF,aAA3B,UAEJ,qBAAKgC,UAAU,UAAUI,QAAS,WAC9B/B,IACAC,KAFJ,SAII,qBAAK2B,IAAKI,EAASF,IAAI,UAAUH,UAAU,sBCxE5CM,MARf,WACE,OACE,qBAAKN,UAAU,MAAf,SACE,cAAC,EAAD,OCDNO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.1e2382d2.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/refresh.9c0da300.jpg\";","export default __webpack_public_path__ + \"static/media/sunny.469a1d1b.gif\";","import axios from 'axios';\r\nimport React, { useState, useEffect } from 'react';\r\nimport './WeatherApp.css'\r\nimport refresh from '../image/refresh.jpg';\r\n// https://dribbble.com/shots/6193524-Weather-Icon-Set-Mostly-Sunny\r\nimport sunny from '../image/sunny.gif';\r\n\r\nconst WeatherApp = () => {\r\n    const authorization = \"CWB-52F9DCE3-BDF3-49E6-81A5-32A4AFDC7460\";\r\n    const [currentWeather, setCurrentWeather] = useState({\r\n        locationName: \"\",\r\n        temp: \"\", // 溫度\r\n        humd: \"\", // 相對濕度\r\n        chanceOfRain: \"\", //降雨機率\r\n        description: \"\"\r\n    });\r\n\r\n    useEffect(() => {\r\n        fetchCurrentWeather();\r\n        fetchWeatherPrediction();\r\n    }, []);\r\n\r\n    const fetchCurrentWeather = () => {\r\n        console.log('fetch current weather');\r\n        const url = `https://opendata.cwb.gov.tw/api/v1/rest/datastore/O-A0003-001?Authorization=${authorization}`;\r\n        axios.get(url)\r\n            .then(respose => {\r\n                const locationName = \"淡水\";\r\n                const target = respose.data.records.location.find(data => data.locationName === locationName);\r\n                const temp = parseFloat(target.weatherElement.find(e => e.elementName === \"TEMP\").elementValue);\r\n                const humd = parseFloat(target.weatherElement.find(e => e.elementName === \"HUMD\").elementValue)*100;\r\n                setCurrentWeather(prevState => {\r\n                    return {\r\n                        ...prevState,\r\n                        locationName,\r\n                        temp,\r\n                        humd\r\n                    }\r\n                });\r\n            })\r\n            .catch(err => {\r\n                console.log('Error:', err);\r\n            });\r\n    };\r\n\r\n    const fetchWeatherPrediction = () => {\r\n        console.log('fetch weather prediction');\r\n        const url = `https://opendata.cwb.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=${authorization}`;\r\n        axios.get(url)\r\n            .then(response => {\r\n                const locationName = \"新北市\";\r\n                const data = response.data.records.location.find(obj => obj.locationName === locationName);\r\n                const description = data.weatherElement.find(e => e.elementName === 'Wx').time[0].parameter.parameterName;\r\n                const chanceOfRain = data.weatherElement.find(e => e.elementName === 'PoP').time[0].parameter.parameterName;\r\n                setCurrentWeather(prevState => {\r\n                    return {\r\n                        ...prevState,\r\n                        description,\r\n                        chanceOfRain\r\n                    }\r\n                });\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n    }\r\n\r\n    return (\r\n        <div className=\"card\">\r\n            <h3>{currentWeather.locationName}</h3>\r\n            <div>{currentWeather.description}</div>\r\n            <div className=\"main\">\r\n                <div className=\"temp\">{currentWeather.temp}<span>°C</span></div>\r\n                <img src={sunny} alt=\"sunny\" className=\"sunny\"/>\r\n            </div>\r\n            <div className=\"weatherElement\">\r\n                <div>相對溼度: {currentWeather.humd}%</div>\r\n                <div>降雨機率: {currentWeather.chanceOfRain}%</div>\r\n            </div>\r\n            <div className=\"refresh\" onClick={() => {\r\n                fetchCurrentWeather();\r\n                fetchWeatherPrediction();\r\n            }}>\r\n                <img src={refresh} alt=\"refresh\" className=\"refreshIcon\"/>\r\n            </div>   \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default WeatherApp; ","import './App.css';\nimport WeatherApp from './component/WeatherApp';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <WeatherApp/>\n    </div>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}